<div class="container" ng-controller="FilesController as c">
  <ul class="nav nav-tabs" ng-init="tab = 'root'">
    <li role="presentation" class="{{tab === 'root' ? 'active' : ''}}" ng-click="tab = 'root'">
      <a>My models</a>
    </li>
    <li role="presentation" class="{{tab === 'shared' ? 'active' : ''}}" ng-click="tab = 'shared'">
      <a>Shared models</a>
    </li>
  </ul>
  <div class="row topMargin" ng-show="tab === 'root'">
    <div class="col-sm-12">
      <div class="panel panel-default">
        <div class="panel-body">
          <!-- Table -->
          <div class="files-list" id="filesList">
            <ul>
              <li class="fhead">
                <div class="fluid">
                  <div class="col">
                    <b>File Name</b>
                  </div>
                  <div class="col hidden-xs">
                    <b>Last Modified</b>
                  </div>
                  <div class="col">
                    <input ng-model="c.search" type="search" class="form-control pull-right" placeholder="Search files">
                  </div>
                </div>
              </li>
              <li class="fluid" ng-if="c.getRoot().pobjects.length === 0">
                <div class="no-files">No available files...</div>
              </li>
              <li class="fluid loading-container" ng-if="c.loading">
                <div class="spinner" id="loading">
                  <div class="double-bounce1"></div>
                  <div class="double-bounce2"></div>
                </div>
              </li>
              <li id="pobjects" class="ng-fade"
                  ng-if="!c.loading" ng-repeat="pobject in c.getRoot().pobjects"
                  ng-include="'files/root.html'"
                  ng-init="depth = 1"></li>
            </ul>
          </div>
        </div>
        <div class="panel-footer">
          <button class="btn btn-success" data-toggle="modal" data-target="#createFileModal{{c.getRoot().id}}">
            <span class="glyphicon glyphicon-file"></span> New model
          </button>
          <button class="btn btn-success" data-toggle="modal" data-target="#createDirectoryModal{{c.getRoot().id}}">
            <span class="glyphicon glyphicon-folder-open"></span> New directory
          </button>
        </div>
      </div>
    </div>
  </div>

  <div class="row topMargin" ng-show="tab === 'shared'">
    <div class="col-sm-12">
      <div class="panel panel-default">
        <div class="panel-body">
          <div class="files-list" id="filesList">
            <ul>
              <li class="fhead">
                <div class="fluid">
                  <div class="col">
                    <b>File Name</b>
                  </div>
                  <div class="col hidden-xs">
                    <b>Last Modified</b>
                  </div>
                  <div class="col">
                    <input ng-model="c.search" type="search" class="form-control pull-right" placeholder="Search files">
                  </div>
                </div>
              </li>
              <li class="fluid" ng-show="c.getShared().pobjects.length === 0">
                <div class="no-files">No available files...</div>
              </li>
              <li id="pobjects" ng-repeat="pobject in c.getShared().pobjects"
                  ng-include="'files/shared.html'"
                  ng-init="depth = 1"></li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- New directory modal -->
  <div class="modal fade" id="createDirectoryModal{{c.getRoot().id}}"
       tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel">
    <div class="modal-dialog modal-md">
      <div class="modal-content">
        <div class="modal-header">
          New directory
        </div>
        <div class="modal-body">
          <div class="form-group directory-name-input">
            <input type="text" class="form-control" ng-model="c.newPobjectTitle" focus/>
            <span class="error-block directory-name-error">Incorrect directory name.</span>
          </div>
        </div>
        <div class="modal-footer">
          <button type="submit" class="btn btn-success" ng-click="c.createDirectory(c.getRoot())">Create</button>
          <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
        </div>
      </div>
    </div>
  </div>

  <!-- New file modal -->
  <div class="modal fade" id="createFileModal{{c.getRoot().id}}"
       tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel">
    <div class="modal-dialog modal-md">
      <div class="modal-content">
        <div class="modal-header">
          New model
        </div>
        <div class="modal-body">
          <div class="form-group input-group file-name-input">
            <input type="text" class="form-control" ng-model="c.newPobjectTitle" focus/>
            <div class="input-group-addon">.bpmn</div>
          </div>
          <span class="error-block file-name-error">Incorrect model name.</span>
        </div>
        <div class="modal-footer">
          <button type="submit" class="btn btn-success" ng-click="c.createFile(c.getRoot())">Create</button>
          <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
        </div>
      </div>
    </div>
  </div>
</div>
